# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# s3 deployment based on http://about.travis-ci.org/blog/2012-12-18-travis-artifacts/

# send to fully-virtualized infrastructure: https://docs.travis-ci.com/user/trusty-ci-environment/
sudo: required
dist: trusty

cache:
  directories:
  - $HOME/.m2

install: true

language: java
jdk: "openjdk8"
script: "./compatibility.sh"

matrix:
  include:
    - env:
      - REMOTE="apache"
      - BRANCH="master"
      - MVN_VERSION="3.0.5"
    - env:
      - REMOTE="apache"
      - BRANCH="master"
      - MVN_VERSION="3.1.1"
    - env:
      - REMOTE="apache"
      - BRANCH="master"
      - MVN_VERSION="3.2.5"
    - env:
      - REMOTE="apache"
      - BRANCH="master"
      - MVN_VERSION="3.3.9"
    - env:
      - REMOTE="apache"
      - BRANCH="master"
      - MVN_VERSION="3.5.4"

git:
  depth: 100

env:
    global:
        # Global variable to avoid hanging travis builds when downloading cache archives.
        - MALLOC_ARENA_MAX=2

notifications:
  slack:
    rooms:
      - secure: G8UfehSohNAjEaiUmq74h+0+VEmf3kGs1mntNDxEMdvlkISHMUNJ9YUyqhKCIou9Z3gl+rSmCG1A5izEMSdWZAJJIx5k2fVGHFoC34Ko/z+5FwrNTaEomUUVM4VMePsZRYXpaDb7E/xNJQH1aS34S3RSoJCz/Jxb86Ip72yOZtk2VtC/3JJnojuLjX56oVlnE2XpctmxMQ2RIxHrcIddH21WKq7UxUuA/0nltItuTJNqYEl5KAHE4lT2F2d7eMYJCv9PMX2fBFlEQ1XqSShg7MogEHexdvsWoF5MYeqkjIIylFkyyagUvJQIeDM/bG2w6gNF6wxsmcioU3uUmJ9CW2ZZPFv0lhYOeVpeithXKamSTrMOJixswTZf3Rb4YzFUcaBvjhWvMJiiodf+m8SNyZdi0ntRZloeF9MVLRmU/h1T13u2t3xbtDgjsJ9zwqOqB7gQjt4S5QKceucZxws9CrbnNX+PPDX/wznfJ4Bo9IAVUYMsX6yY8+LjX8xgDO2gdaxXDdnzTCL4bQNt4XKbmDnXYn+N6esqITSucEoc5c3H2dYQLkKNo1uMP0UwmaS3iduKBCNvTUSEZROqKmdwXPG6WFcCgdq+L6UKDIGG7GQ+ABQ/oRSfZ5vfWcrDniPAs9Xw2EKfgwfceRZtdwVL7GyfTdrFSJjxHfCAG2+n2F4=
      - secure: Y3tLJdbPWPvMfhrs1ImLYCU5xomNgvgLjhOzk+U0gJEY2l8oiQoGpskmKrXxGvDtomwwuRkZ1VXntsjw2zEEG+0T/L9bYlHF83zg5MXWPdAZSrM99fXB0dU75C97Ac0vk4nQwwAKkcD1neWh4OLEYH0+PJrbp/pjz86NbbTovB8RdTKPdiOL6BjlVObLQZXBbAv0gXRnLazID/VV9dCeGkuOshej6TWbCdbEA35vSIQpz6Rci1oufF4dpMs914df++wbWRGQ+GxwXgJc6fpBWT+s62Q6wrNTSQWhGgErEnzTq/JBGb4KTK82XW/fvohAM5oMugv/FV4Llm7B9evUjB8lPvP20EZmPpCTChFsEj0Afpzw+S+q8NLZ7hz7p6qnP7rOWCMw+R0RfrbXzUQ1plUJg4Fc5Vm6nICDoFSxE0dutSOGlYdPyqIHZNv9WPYCTHQKDT6qDNP17tHxyPIS2bEB1rcai5x5KTXqWtnhPZpPb46pjWrvkCOLMLQ4ONzXKi4XWyuxIFnO3W+godUvja6ChveN/iTrp70lI8vz9AbvS+KA3XW9Hn4JruXP66QsiaORu7wvMUr4WaClYMqe98QS18hqS9OCqlEhOxWun8+l7P7UBoeMAIgLfUODmizMjywWBUwiBWz7P9E1rlZ5Sdf9srvJylsnciTGebPQzcE=
    on_success: never
    on_pull_requests: false
